<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="theme-color" content="#000000">
<title>Habit Tracker</title>
<style>

/* Tailwind CSS Base */
*, ::before, ::after {
  box-sizing: border-box;
  border-width: 0;
  border-style: solid;
  border-color: #e5e7eb;
}

html {
  line-height: 1.5;
  -webkit-text-size-adjust: 100%;
  tab-size: 4;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
}

body {
  margin: 0;
  line-height: inherit;
}

h1, h2, h3, h4, h5, h6 {
  font-size: inherit;
  font-weight: inherit;
}

a {
  color: inherit;
  text-decoration: inherit;
}

button, input, optgroup, select, textarea {
  font-family: inherit;
  font-size: 100%;
  font-weight: inherit;
  line-height: inherit;
  color: inherit;
  margin: 0;
  padding: 0;
}

button, select {
  text-transform: none;
}

button {
  -webkit-appearance: button;
  background-color: transparent;
  background-image: none;
}

button, [type='button'], [type='reset'], [type='submit'] {
  -webkit-appearance: button;
  cursor: pointer;
}

input, textarea {
  border: none;
}

/* Layout */
.fixed { position: fixed; }
.absolute { position: absolute; }
.relative { position: relative; }
.inset-0 { top: 0px; right: 0px; bottom: 0px; left: 0px; }
.z-50 { z-index: 50; }

/* Display */
.block { display: block; }
.inline-block { display: inline-block; }
.flex { display: flex; }
.inline-flex { display: inline-flex; }
.grid { display: grid; }
.hidden { display: none; }

/* Flexbox */
.flex-1 { flex: 1 1 0%; }
.flex-col { flex-direction: column; }
.flex-wrap { flex-wrap: wrap; }
.items-start { align-items: flex-start; }
.items-center { align-items: center; }
.justify-start { justify-content: flex-start; }
.justify-center { justify-content: center; }
.justify-between { justify-content: space-between; }
.shrink-0 { flex-shrink: 0; }

/* Grid */
.grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }

/* Gap */
.gap-1 { gap: 0.25rem; }
.gap-1\.5 { gap: 0.375rem; }
.gap-2 { gap: 0.5rem; }
.gap-3 { gap: 0.75rem; }
.gap-4 { gap: 1rem; }

/* Spacing */
.space-y-2 > :not([hidden]) ~ :not([hidden]) { margin-top: 0.5rem; }
.space-y-3 > :not([hidden]) ~ :not([hidden]) { margin-top: 0.75rem; }
.space-y-4 > :not([hidden]) ~ :not([hidden]) { margin-top: 1rem; }
.space-y-6 > :not([hidden]) ~ :not([hidden]) { margin-top: 1.5rem; }

/* Width */
.w-3 { width: 0.75rem; }
.w-4 { width: 1rem; }
.w-16 { width: 4rem; }
.w-20 { width: 5rem; }
.w-64 { width: 16rem; }
.w-full { width: 100%; }
.min-w-0 { min-width: 0px; }
.max-w-md { max-width: 28rem; }
.max-w-2xl { max-width: 42rem; }
.max-w-4xl { max-width: 56rem; }

/* Height */
.h-2 { height: 0.5rem; }
.h-3 { height: 0.75rem; }
.h-20 { height: 5rem; }
.h-64 { height: 16rem; }
.min-h-24 { min-height: 6rem; }
.min-h-screen { min-height: 100vh; }
.max-h-\[85vh\] { max-height: 85vh; }

/* Padding */
.p-1 { padding: 0.25rem; }
.p-2 { padding: 0.5rem; }
.p-4 { padding: 1rem; }
.p-5 { padding: 1.25rem; }
.p-6 { padding: 1.5rem; }
.p-8 { padding: 2rem; }
.px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
.px-4 { padding-left: 1rem; padding-right: 1rem; }
.px-5 { padding-left: 1.25rem; padding-right: 1.25rem; }
.px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
.py-1 { padding-top: 0.25rem; padding-bottom: 0.25rem; }
.py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
.py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
.py-6 { padding-top: 1.5rem; padding-bottom: 1.5rem; }
.pb-4 { padding-bottom: 1rem; }

/* Margin */
.m-0 { margin: 0; }
.mx-auto { margin-left: auto; margin-right: auto; }
.mt-0\.5 { margin-top: 0.125rem; }
.mt-1 { margin-top: 0.25rem; }
.mt-2 { margin-top: 0.5rem; }
.mt-3 { margin-top: 0.75rem; }
.mt-4 { margin-top: 1rem; }
.mt-6 { margin-top: 1.5rem; }
.mb-1 { margin-bottom: 0.25rem; }
.mb-2 { margin-bottom: 0.5rem; }
.mb-3 { margin-bottom: 0.75rem; }
.mb-4 { margin-bottom: 1rem; }
.mb-6 { margin-bottom: 1.5rem; }
.ml-4 { margin-left: 1rem; }

/* Typography */
.text-xs { font-size: 0.75rem; line-height: 1rem; }
.text-sm { font-size: 0.875rem; line-height: 1.25rem; }
.text-base { font-size: 1rem; line-height: 1.5rem; }
.text-lg { font-size: 1.125rem; line-height: 1.75rem; }
.text-xl { font-size: 1.25rem; line-height: 1.75rem; }
.text-2xl { font-size: 1.5rem; line-height: 2rem; }
.text-3xl { font-size: 1.875rem; line-height: 2.25rem; }
.font-medium { font-weight: 500; }
.font-semibold { font-weight: 600; }
.font-bold { font-weight: 700; }
.leading-none { line-height: 1; }
.tracking-tight { letter-spacing: -0.025em; }
.text-center { text-align: center; }
.text-right { text-align: right; }

/* Text Overflow */
.truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.whitespace-nowrap { white-space: nowrap; }

/* Borders */
.border { border-width: 1px; }
.border-b { border-bottom-width: 1px; }
.border-t { border-top-width: 1px; }
.rounded { border-radius: 0.25rem; }
.rounded-sm { border-radius: 0.125rem; }
.rounded-lg { border-radius: 0.5rem; }
.rounded-xl { border-radius: 0.75rem; }
.rounded-2xl { border-radius: 1rem; }
.rounded-full { border-radius: 9999px; }

/* Border Colors */
.border-zinc-200 { border-color: rgb(228 228 231); }
.border-zinc-800 { border-color: rgb(39 39 42); }

/* Background Colors */
.bg-white { background-color: rgb(255 255 255); }
.bg-black { background-color: rgb(0 0 0); }
.bg-zinc-50 { background-color: rgb(250 250 250); }
.bg-zinc-100 { background-color: rgb(244 244 245); }
.bg-zinc-200 { background-color: rgb(228 228 231); }
.bg-zinc-800 { background-color: rgb(39 39 42); }
.bg-zinc-900 { background-color: rgb(24 24 27); }
.bg-red-50 { background-color: rgb(254 242 242); }
.bg-red-950 { background-color: rgb(69 10 10); }

/* Text Colors */
.text-white { color: rgb(255 255 255); }
.text-black { color: rgb(0 0 0); }
.text-zinc-300 { color: rgb(212 212 216); }
.text-zinc-400 { color: rgb(161 161 170); }
.text-zinc-500 { color: rgb(113 113 122); }
.text-zinc-600 { color: rgb(82 82 91); }
.text-zinc-700 { color: rgb(63 63 70); }
.text-red-400 { color: rgb(248 113 113); }
.text-red-600 { color: rgb(220 38 38); }

/* Hover Background Colors */
.hover\:bg-zinc-50:hover { background-color: rgb(250 250 250); }
.hover\:bg-zinc-100:hover { background-color: rgb(244 244 245); }
.hover\:bg-zinc-200:hover { background-color: rgb(228 228 231); }
.hover\:bg-zinc-700:hover { background-color: rgb(63 63 70); }
.hover\:bg-zinc-800:hover { background-color: rgb(39 39 42); }
.hover\:bg-zinc-900:hover { background-color: rgb(24 24 27); }
.hover\:bg-zinc-900\/50:hover { background-color: rgb(24 24 27 / 0.5); }
.hover\:bg-red-100:hover { background-color: rgb(254 226 226); }
.hover\:bg-red-900:hover { background-color: rgb(127 29 29); }

/* Overflow */
.overflow-hidden { overflow: hidden; }
.overflow-x-hidden { overflow-x: hidden; }
.overflow-y-auto { 
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

/* Cursor */
.cursor-pointer { cursor: pointer; }

/* Transitions */
.transition-colors {
  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 150ms;
}
.transition-all {
  transition-property: all;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 150ms;
}
.duration-300 { transition-duration: 300ms; }
.duration-1000 { transition-duration: 1000ms; }

/* Outline */
.outline-none {
  outline: 2px solid transparent;
  outline-offset: 2px;
}

/* Focus */
.focus\:border-zinc-700:focus { border-color: rgb(63 63 70); }
.focus\:border-zinc-400:focus { border-color: rgb(161 161 170); }

/* Resize */
.resize-none { resize: none; }

/* Custom Styles */
.habit-card {
  transition: all 0.3s ease;
}
.habit-card:hover {
  transform: translateX(4px);
}

.checkbox {
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}
.checkbox:hover {
  transform: scale(1.05);
}
.checkbox:active {
  transform: scale(0.95);
}

.modal-backdrop {
  backdrop-filter: blur(8px);
  animation: fadeIn 0.2s ease;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.modal-content {
  animation: slideUp 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.streak-badge {
  background: rgb(26 26 26);
}

/* Mobile friendly */
body {
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  overscroll-behavior-y: contain;
}

* {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

</style>
<script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone@7.23.5/babel.min.js"></script>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const {useState,useEffect}=React;
const {createRoot}=ReactDOM;
window.storage={async get(k){try{const v=localStorage.getItem(k);return v?{key:k,value:v}:null}catch(e){return null}},async set(k,v){try{localStorage.setItem(k,v);return{key:k,value:v}}catch(e){return null}},async delete(k){try{localStorage.removeItem(k);return{key:k,deleted:true}}catch(e){return null}}};
const Check=({size=24,className='',strokeWidth=2})=><svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="20 6 9 17 4 12"></polyline></svg>;
const Plus=({size=24,className=''})=><svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>;
const X=({size=24,className=''})=><svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>;
const Settings=({size=24,className=''})=><svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path><circle cx="12" cy="12" r="3"></circle></svg>;
const Moon=({size=24,className=''})=><svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>;
const Sun=({size=24,className=''})=><svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>;
const Bell=({size=24,className=''})=><svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>;
const BellOff=({size=24,className=''})=><svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M13.73 21a2 2 0 0 1-3.46 0"></path><path d="M18.63 13A17.89 17.89 0 0 1 18 8"></path><path d="M6.26 6.26A5.86 5.86 0 0 0 6 8c0 7-3 9-3 9h14"></path><path d="M18 8a6 6 0 0 0-9.33-5"></path><line x1="1" y1="1" x2="23" y2="23"></line></svg>;
const Calendar=({size=24,className=''})=><svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>;
const TrendingUp=({size=24,className=''})=><svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12"></polyline></svg>;
const Hourglass=({size=24,className=''})=><svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M5 22h14"></path><path d="M5 2h14"></path><path d="M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22"></path><path d="M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2"></path></svg>;
const Info=({size=24,className=''})=><svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>;
const Download=({size=24,className=''})=><svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>;
const Upload=({size=24,className=''})=><svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>;
const QrCode=({size=24,className=''})=><svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect x="3" y="3" width="5" height="5"></rect><rect x="16" y="3" width="5" height="5"></rect><rect x="3" y="16" width="5" height="5"></rect><path d="M21 16h-3a2 2 0 0 0-2 2v3"></path><path d="M21 21v.01"></path><path d="M12 7v3a2 2 0 0 1-2 2H7"></path><path d="M3 12h.01"></path><path d="M12 3h.01"></path><path d="M12 16v.01"></path><path d="M16 12h1"></path><path d="M21 12v.01"></path><path d="M12 21v-1"></path></svg>;
const Camera=({size=24,className=''})=><svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg>;
const ChevronRight=({size=24,className=''})=><svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="9 18 15 12 9 6"></polyline></svg>;

const HabitTracker = () => {
  const [habits, setHabits] = useState([]);
  const [darkMode, setDarkMode] = useState(true);
  const [showAddModal, setShowAddModal] = useState(false);
  const [selectedHabit, setSelectedHabit] = useState(null);
  const [editingHabit, setEditingHabit] = useState(null);
  const [showSettings, setShowSettings] = useState(false);
  const [showInfo, setShowInfo] = useState(false);
  const [showQRCode, setShowQRCode] = useState(false);
  const [showQRScanner, setShowQRScanner] = useState(false);
  const [view, setView] = useState('today'); // 'today' or 'overview'
  const [settings, setSettings] = useState({
    birthDate: '',
    lifeExpectancy: 80,
    retirementAge: null
  });
  
  // Load data from storage
  useEffect(() => {
    const loadData = async () => {
      try {
        const [habitsData, themeData, settingsData] = await Promise.all([
          window.storage.get('habits'),
          window.storage.get('theme'),
          window.storage.get('settings')
        ]);
        
        if (habitsData?.value) {
          setHabits(JSON.parse(habitsData.value));
        }
        if (themeData?.value) {
          setDarkMode(JSON.parse(themeData.value));
        }
        if (settingsData?.value) {
          setSettings(JSON.parse(settingsData.value));
        }
      } catch (error) {
        console.log('No saved data found, starting fresh');
      }
    };
    loadData();
  }, []);

  // Event listeners for export/import from settings modal
  useEffect(() => {
    const handleExport = () => exportData();
    const handleImport = (e) => importData(e.detail);
    const handleShowQR = () => {
      setShowSettings(false);
      setShowQRCode(true);
    };
    const handleShowScanner = () => {
      setShowSettings(false);
      setShowQRScanner(true);
    };

    window.addEventListener('exportData', handleExport);
    window.addEventListener('importData', handleImport);
    window.addEventListener('showQRCode', handleShowQR);
    window.addEventListener('showQRScanner', handleShowScanner);

    return () => {
      window.removeEventListener('exportData', handleExport);
      window.removeEventListener('importData', handleImport);
      window.removeEventListener('showQRCode', handleShowQR);
      window.removeEventListener('showQRScanner', handleShowScanner);
    };
  }, [habits, settings]);
  
  // Save habits
  useEffect(() => {
    if (habits.length > 0) {
      window.storage.set('habits', JSON.stringify(habits)).catch(err => {
        console.error('Failed to save habits:', err);
      });
    }
  }, [habits]);
  
  // Save theme
  useEffect(() => {
    window.storage.set('theme', JSON.stringify(darkMode)).catch(err => {
      console.error('Failed to save theme:', err);
    });
  }, [darkMode]);

  // Save settings
  useEffect(() => {
    window.storage.set('settings', JSON.stringify(settings)).catch(err => {
      console.error('Failed to save settings:', err);
    });
  }, [settings]);

  const addHabit = (habitData) => {
    const newHabit = {
      id: Date.now(),
      ...habitData,
      completions: []
    };
    setHabits([...habits, newHabit]);
    setShowAddModal(false);
  };

  const updateHabit = (id, habitData) => {
    setHabits(habits.map(habit => 
      habit.id === id 
        ? { ...habit, ...habitData }
        : habit
    ));
    setEditingHabit(null);
    setSelectedHabit(null);
  };

  const deleteHabit = async (id) => {
    const updatedHabits = habits.filter(h => h.id !== id);
    setHabits(updatedHabits);
    setSelectedHabit(null);
    setEditingHabit(null);
    
    // Update storage
    if (updatedHabits.length > 0) {
      await window.storage.set('habits', JSON.stringify(updatedHabits));
    } else {
      await window.storage.delete('habits');
    }
  };

  const toggleCompletion = (habitId, date) => {
    setHabits(habits.map(habit => {
      if (habit.id === habitId) {
        const completions = [...habit.completions];
        const index = completions.indexOf(date);
        if (index > -1) {
          completions.splice(index, 1);
        } else {
          completions.push(date);
        }
        return { ...habit, completions };
      }
      return habit;
    }));
  };

  const getStreak = (habit) => {
    if (habit.completions.length === 0) return 0;
    
    const sorted = [...habit.completions].sort((a, b) => new Date(b) - new Date(a));
    const today = new Date().toDateString();
    const yesterday = new Date(Date.now() - 86400000).toDateString();
    
    if (sorted[0] !== today && sorted[0] !== yesterday) return 0;
    
    let streak = 0;
    let checkDate = new Date();
    
    for (let i = 0; i < sorted.length; i++) {
      const completionDate = new Date(sorted[i]).toDateString();
      const expectedDate = new Date(checkDate).toDateString();
      
      if (completionDate === expectedDate) {
        streak++;
        checkDate = new Date(checkDate.getTime() - 86400000);
      } else {
        break;
      }
    }
    
    return streak;
  };

  const isCompletedToday = (habit) => {
    const today = new Date().toDateString();
    return habit.completions.includes(today);
  };

  const getLast7Days = () => {
    const days = [];
    for (let i = 6; i >= 0; i--) {
      const date = new Date(Date.now() - i * 86400000);
      days.push({
        date: date.toDateString(),
        dayName: date.toLocaleDateString('de-DE', { weekday: 'short' }),
        dayNum: date.getDate()
      });
    }
    return days;
  };

  const getLifeProgress = () => {
    if (!settings.birthDate) return 0;
    
    const birthYear = parseInt(settings.birthDate);
    const currentYear = new Date().getFullYear();
    const currentAge = currentYear - birthYear;
    const progress = Math.min((currentAge / settings.lifeExpectancy) * 100, 100);
    
    console.log('Life Progress Debug:', {
      birthYear,
      currentYear,
      currentAge,
      lifeExpectancy: settings.lifeExpectancy,
      progress
    });
    
    return progress;
  };

  const getRetirementProgress = () => {
    if (!settings.retirementAge) return null;
    return (settings.retirementAge / settings.lifeExpectancy) * 100;
  };

  // Export data as JSON file
  const exportData = () => {
    const data = {
      habits,
      settings,
      exportDate: new Date().toISOString(),
      version: '1.0'
    };
    
    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `habits-backup-${new Date().toISOString().split('T')[0]}.json`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
  };

  // Import data from JSON file
  const importData = (event) => {
    const file = event.target.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = async (e) => {
      try {
        const data = JSON.parse(e.target.result);
        
        if (data.habits && Array.isArray(data.habits)) {
          setHabits(data.habits);
          await window.storage.set('habits', JSON.stringify(data.habits));
        }
        
        if (data.settings) {
          setSettings(data.settings);
          await window.storage.set('settings', JSON.stringify(data.settings));
        }
        
        alert('Data imported successfully!');
      } catch (error) {
        alert('Import error: Invalid file');
        console.error('Import error:', error);
      }
    };
    reader.readAsText(file);
    event.target.value = '';
  };

  // Generate QR Code data
  const generateQRData = () => {
    return JSON.stringify({
      habits,
      settings,
      exportDate: new Date().toISOString(),
      version: '1.0'
    });
  };

  // Import from QR Code
  const importFromQR = async (qrData) => {
    try {
      const data = JSON.parse(qrData);
      
      if (data.habits && Array.isArray(data.habits)) {
        setHabits(data.habits);
        await window.storage.set('habits', JSON.stringify(data.habits));
      }
      
      if (data.settings) {
        setSettings(data.settings);
        await window.storage.set('settings', JSON.stringify(data.settings));
      }
      
      setShowQRScanner(false);
      alert('Data imported successfully!');
    } catch (error) {
      alert('Import error: Invalid QR code');
      console.error('QR Import error:', error);
    }
  };

  return (
    <div className={`min-h-screen ${darkMode ? 'bg-black text-white' : 'bg-white text-black'} transition-colors duration-300`}>
      <style>{`
        * {
          font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }
        
        .checkbox {
          transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .checkbox:hover {
          transform: scale(1.05);
        }
        
        .checkbox:active {
          transform: scale(0.95);
        }
        
        .habit-card {
          transition: all 0.3s ease;
        }
        
        .habit-card:hover {
          transform: translateX(4px);
        }
        
        .modal-backdrop {
          backdrop-filter: blur(8px);
          animation: fadeIn 0.2s ease;
        }
        
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        .modal-content {
          animation: slideUp 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        .streak-badge {
          background: ${darkMode ? '#1a1a1a' : '#f5f5f5'};
        }
      `}</style>

      {/* Header */}
      <div className={`border-b ${darkMode ? 'border-zinc-800' : 'border-zinc-200'}`}>
        <div className="max-w-4xl mx-auto px-6 py-6 flex items-center justify-between">
          <div>
            <h1 className="text-2xl font-bold tracking-tight">HABITS</h1>
            <p className={`text-sm mt-1 ${darkMode ? 'text-zinc-500' : 'text-zinc-500'}`}>
              {new Date().toLocaleDateString('en-GB', { weekday: 'long', day: 'numeric', month: 'short', year: 'numeric' })}
            </p>
          </div>
          <div className="flex items-center gap-3">
            <button
              onClick={() => setView(view === 'today' ? 'overview' : 'today')}
              className={`p-2 rounded-lg ${darkMode ? 'hover:bg-zinc-900' : 'hover:bg-zinc-100'}`}
            >
              {view === 'today' ? <TrendingUp size={20} /> : <Calendar size={20} />}
            </button>
            <button
              onClick={() => setShowSettings(true)}
              className={`p-2 rounded-lg ${darkMode ? 'hover:bg-zinc-900' : 'hover:bg-zinc-100'}`}
            >
              <Settings size={20} />
            </button>
            <button
              onClick={() => setShowInfo(true)}
              className={`p-2 rounded-lg ${darkMode ? 'hover:bg-zinc-900' : 'hover:bg-zinc-100'}`}
            >
              <Info size={20} />
            </button>
            <div className="w-4" />
            <button
              onClick={() => setShowAddModal(true)}
              className={`px-4 py-2 rounded-lg font-medium flex items-center gap-2 ${
                darkMode ? 'bg-white text-black hover:bg-zinc-200' : 'bg-black text-white hover:bg-zinc-800'
              }`}
            >
              <Plus size={18} />
              New
            </button>
          </div>
        </div>
      </div>

      {/* Main Content */}
      <div className="max-w-4xl mx-auto px-6 py-8">
        {/* Life Progress Bar */}
        {settings.birthDate && (
          <div className="mb-8 flex items-center gap-4" style={{ paddingTop: '2rem', paddingBottom: '2rem' }}>
            <div className="w-16 flex items-center justify-center">
              <Hourglass size={24} className={darkMode ? 'text-zinc-500' : 'text-zinc-500'} />
            </div>
            <div className="flex-1 relative">
              {/* Retirement marker - above and below */}
              {getRetirementProgress() && (
                <>
                  <div 
                    style={{ 
                      position: 'absolute',
                      bottom: '100%',
                      left: `${getRetirementProgress()}%`,
                      width: '2px',
                      height: '16px',
                      marginBottom: '8px',
                      backgroundColor: darkMode ? '#ffffff' : '#000000'
                    }}
                  />
                  <div 
                    style={{ 
                      position: 'absolute',
                      top: '100%',
                      left: `${getRetirementProgress()}%`,
                      width: '2px',
                      height: '16px',
                      marginTop: '8px',
                      backgroundColor: darkMode ? '#ffffff' : '#000000'
                    }}
                  />
                </>
              )}
              <div className="rounded-full overflow-hidden" style={{ height: '12px', backgroundColor: darkMode ? 'rgb(24, 24, 27)' : 'rgb(228, 228, 231)' }}>
                <div 
                  style={{ 
                    height: '12px',
                    width: getLifeProgress() + '%',
                    backgroundColor: darkMode ? 'rgb(255, 255, 255)' : 'rgb(0, 0, 0)',
                    transition: 'all 1000ms'
                  }}
                />
              </div>
            </div>
          </div>
        )}

        {view === 'today' ? (
          // Today View
          <div className="space-y-3">
            {habits.length === 0 ? (
              <div className="text-center py-16">
                <button
                  onClick={() => setShowAddModal(true)}
                  className={`w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center transition-colors ${
                    darkMode ? 'bg-zinc-900 hover:bg-zinc-800' : 'bg-zinc-100 hover:bg-zinc-200'
                  }`}
                >
                  <Plus size={24} className="text-zinc-500" />
                </button>
                <p className={`text-lg mb-2 ${darkMode ? 'text-zinc-400' : 'text-zinc-600'}`}>
                  No habits yet
                </p>
                <p className={`text-sm ${darkMode ? 'text-zinc-600' : 'text-zinc-400'}`}>
                  Create your first habit to get started
                </p>
              </div>
            ) : (
              habits.map(habit => {
                const streak = getStreak(habit);
                const completed = isCompletedToday(habit);
                
                return (
                  <div
                    key={habit.id}
                    className={`habit-card rounded-xl border overflow-hidden flex min-h-24 ${
                      darkMode ? 'border-zinc-800 hover:bg-zinc-900/50' : 'border-zinc-200 hover:bg-zinc-50'
                    }`}
                  >
                    {/* Column 1: Checkbox */}
                    <button
                      onClick={(e) => {
                        e.stopPropagation();
                        toggleCompletion(habit.id, new Date().toDateString());
                      }}
                      className={`w-20 flex items-center justify-center transition-colors ${
                        completed
                          ? (darkMode ? 'bg-white' : 'bg-white')
                          : (darkMode ? 'bg-zinc-900 hover:bg-zinc-800' : 'bg-zinc-100 hover:bg-zinc-200')
                      }`}
                    >
                      <Check 
                        size={24} 
                        className={completed ? 'text-black' : (darkMode ? 'text-zinc-700' : 'text-zinc-300')} 
                        strokeWidth={3} 
                      />
                    </button>
                    
                    {/* Column 2: Habit Name (flexible width) */}
                    <div 
                      className="flex-1 px-5 cursor-pointer flex items-center"
                      onClick={() => setSelectedHabit(habit)}
                    >
                      <div className="flex-1 min-w-0">
                        <h3 className="font-semibold text-lg truncate">{habit.name}</h3>
                        {habit.reminderTime && (
                          <span className={`text-xs flex items-center gap-1 mt-0.5 ${darkMode ? 'text-zinc-500' : 'text-zinc-500'}`}>
                            <Bell size={12} />
                            {habit.reminderTime}
                          </span>
                        )}
                      </div>
                    </div>
                    
                    {/* Column 3: Frequency (fixed width) */}
                    <div 
                      className="px-6 flex items-center justify-center cursor-pointer"
                      onClick={() => setSelectedHabit(habit)}
                    >
                      <span className={`text-sm font-medium whitespace-nowrap ${darkMode ? 'text-zinc-400' : 'text-zinc-600'}`}>
                        {habit.frequency === 'daily' ? 'Daily' : habit.frequency === 'every2days' ? 'Every 2 days' : habit.frequency === 'weekly' ? 'Weekly' : 'Monthly'}
                      </span>
                    </div>
                  </div>
                );
              })
            )}
          </div>
        ) : (
          // Overview with simple checkbox grid
          <div className="space-y-4">
            {habits.length === 0 ? (
              <div className="text-center py-16">
                <button
                  onClick={() => setShowAddModal(true)}
                  className={`w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center transition-colors ${
                    darkMode ? 'bg-zinc-900 hover:bg-zinc-800' : 'bg-zinc-100 hover:bg-zinc-200'
                  }`}
                >
                  <Plus size={24} className="text-zinc-500" />
                </button>
                <p className={`text-lg mb-2 ${darkMode ? 'text-zinc-400' : 'text-zinc-600'}`}>
                  No habits yet
                </p>
                <p className={`text-sm ${darkMode ? 'text-zinc-600' : 'text-zinc-400'}`}>
                  Create your first habit to get started
                </p>
              </div>
            ) : (
              habits.map(habit => {
                const streak = getStreak(habit);
                const totalCompletions = habit.completions.length;
                
                return (
                  <div
                    key={habit.id}
                    className={`rounded-xl border overflow-hidden flex min-h-24 ${
                      darkMode ? 'border-zinc-800 hover:bg-zinc-900/50' : 'border-zinc-200 hover:bg-zinc-50'
                    }`}
                  >
                    {/* Count Circle Column - same position as checkbox in today view */}
                    <div className={`w-20 flex items-center justify-center shrink-0 ${
                      darkMode ? 'bg-zinc-900' : 'bg-zinc-100'
                    }`}>
                      <div className="flex flex-col items-center justify-center">
                        <div className={`font-bold leading-none ${totalCompletions >= 1000 ? 'text-base' : 'text-lg'}`}>{totalCompletions}</div>
                      </div>
                    </div>
                    
                    {/* Content - Name only */}
                    <div className="flex-1 px-5 cursor-pointer" onClick={() => setSelectedHabit(habit)}>
                      <div className="flex-1 min-w-0">
                        <h3 className="font-semibold text-lg truncate mb-3">{habit.name}</h3>
                        <div className="flex flex-wrap gap-1.5">
                          {habit.completions.slice(-100).map((completion, idx) => (
                            <div
                              key={idx}
                              className={`w-3 h-3 rounded-sm ${
                                darkMode ? 'bg-white' : 'bg-black'
                              }`}
                            />
                          ))}
                        </div>
                      </div>
                    </div>
                    
                    {/* Frequency Column - same as Today view */}
                    <div className="px-6 flex items-center justify-center cursor-pointer" onClick={() => setSelectedHabit(habit)}>
                      <span className={`text-sm font-medium whitespace-nowrap ${darkMode ? 'text-zinc-400' : 'text-zinc-600'}`}>
                        {habit.frequency === 'daily' ? 'Daily' : habit.frequency === 'every2days' ? 'Every 2 days' : habit.frequency === 'weekly' ? 'Weekly' : 'Monthly'}
                      </span>
                    </div>
                  </div>
                );
              })
            )}
          </div>
        )}
      </div>

      {/* Add Habit Modal */}
      {showAddModal && (
        <AddHabitModal
          darkMode={darkMode}
          onClose={() => setShowAddModal(false)}
          onAdd={addHabit}
        />
      )}

      {/* Info Modal */}
      {showInfo && (
        <InfoModal
          darkMode={darkMode}
          onClose={() => setShowInfo(false)}
        />
      )}

      {/* Settings Modal */}
      {showSettings && (
        <SettingsModal
          settings={settings}
          darkMode={darkMode}
          setDarkMode={setDarkMode}
          onClose={() => setShowSettings(false)}
          onSave={(newSettings) => {
            setSettings(newSettings);
            setShowSettings(false);
          }}
        />
      )}

      {/* Edit Habit Modal */}
      {editingHabit && (
        <EditHabitModal
          habit={editingHabit}
          darkMode={darkMode}
          onClose={() => setEditingHabit(null)}
          onUpdate={updateHabit}
        />
      )}

      {/* Habit Detail Modal */}
      {selectedHabit && (
        <HabitDetailModal
          habit={selectedHabit}
          darkMode={darkMode}
          onClose={() => setSelectedHabit(null)}
          onDelete={deleteHabit}
          onEdit={(habit) => {
            setSelectedHabit(null);
            setEditingHabit(habit);
          }}
          getStreak={getStreak}
        />
      )}

      {/* QR Code Modal */}
      {showQRCode && (
        <QRCodeModal
          darkMode={darkMode}
          qrData={generateQRData()}
          onClose={() => setShowQRCode(false)}
        />
      )}

      {/* QR Scanner Modal */}
      {showQRScanner && (
        <QRScannerModal
          darkMode={darkMode}
          onClose={() => setShowQRScanner(false)}
          onScan={importFromQR}
        />
      )}
    </div>
  );
};

const AddHabitModal = ({ darkMode, onClose, onAdd }) => {
  const [formData, setFormData] = useState({
    name: '',
    description: '',
    frequency: 'daily',
    reminderEnabled: false,
    reminderTime: '09:00',
    createdAt: new Date().toISOString().split('T')[0]
  });

  const handleSubmit = (e) => {
    e.preventDefault();
    if (formData.name.trim()) {
      onAdd({
        name: formData.name.trim(),
        description: formData.description.trim(),
        frequency: formData.frequency,
        reminderTime: formData.reminderEnabled ? formData.reminderTime : null,
        createdAt: new Date(formData.createdAt).toISOString()
      });
    }
  };

  return (
    <div className="modal-backdrop fixed inset-0 z-50 flex items-center justify-center p-4" style={{
      backgroundColor: darkMode ? 'rgba(0,0,0,0.8)' : 'rgba(255,255,255,0.8)'
    }} onClick={onClose}>
      <div
        className={`modal-content w-full max-w-md rounded-2xl ${
          darkMode ? 'bg-zinc-900 border border-zinc-800' : 'bg-white border border-zinc-200'
        } max-h-[85vh] flex flex-col`}
        onClick={(e) => e.stopPropagation()}
      >
        <div className={`flex items-center justify-between p-6 pb-4 border-b ${darkMode ? 'border-zinc-800' : 'border-zinc-200'}`}>
          <h2 className="text-xl font-bold">New Habit</h2>
          <button
            onClick={onClose}
            className={`p-2 rounded-lg ${darkMode ? 'hover:bg-zinc-800' : 'hover:bg-zinc-100'}`}
          >
            <X size={20} />
          </button>
        </div>

        <div className="overflow-y-auto flex-1 px-6" style={{ minHeight: 0 }}>
          <form onSubmit={handleSubmit} className="space-y-4 py-6">
          <div>
            <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-zinc-400' : 'text-zinc-600'}`}>
              Name *
            </label>
            <input
              type="text"
              value={formData.name}
              onChange={(e) => setFormData({ ...formData, name: e.target.value })}
              placeholder="e.g. Meditation, Exercise, Reading..."
              className={`w-full px-4 py-3 rounded-lg border ${
                darkMode
                  ? 'bg-black border-zinc-800 focus:border-zinc-700'
                  : 'bg-white border-zinc-200 focus:border-zinc-400'
              } outline-none transition-colors`}
              autoFocus
            />
          </div>

          <div>
            <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-zinc-400' : 'text-zinc-600'}`}>
              Description (optional)
            </label>
            <textarea
              value={formData.description}
              onChange={(e) => setFormData({ ...formData, description: e.target.value })}
              placeholder="Brief description..."
              rows={2}
              className={`w-full px-4 py-3 rounded-lg border resize-none ${
                darkMode
                  ? 'bg-black border-zinc-800 focus:border-zinc-700'
                  : 'bg-white border-zinc-200 focus:border-zinc-400'
              } outline-none transition-colors`}
            />
          </div>

          <div>
            <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-zinc-400' : 'text-zinc-600'}`}>
              Frequency
            </label>
            <div className="grid grid-cols-2 gap-2">
              {[
                { value: 'daily', label: 'Daily' },
                { value: 'every2days', label: 'Every 2 days' },
                { value: 'weekly', label: 'Weekly' },
                { value: 'monthly', label: 'Monthly' }
              ].map(option => (
                <button
                  key={option.value}
                  type="button"
                  onClick={() => setFormData({ ...formData, frequency: option.value })}
                  className={`px-4 py-3 rounded-lg text-sm font-medium transition-all ${
                    formData.frequency === option.value
                      ? (darkMode ? 'bg-white text-black' : 'bg-black text-white')
                      : (darkMode ? 'bg-zinc-800 hover:bg-zinc-750' : 'bg-zinc-100 hover:bg-zinc-200')
                  }`}
                >
                  {option.label}
                </button>
              ))}
            </div>
          </div>

          <div>
            <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-zinc-400' : 'text-zinc-600'}`}>
              Start Date
            </label>
            <input
              type="date"
              value={formData.createdAt}
              onChange={(e) => setFormData({ ...formData, createdAt: e.target.value })}
              className={`w-full px-4 py-3 rounded-lg border ${
                darkMode
                  ? 'bg-black border-zinc-800 focus:border-zinc-700'
                  : 'bg-white border-zinc-200 focus:border-zinc-400'
              } outline-none transition-colors`}
            />
          </div>

          <div>
            <div className="flex items-center justify-between mb-2">
              <label className={`text-sm font-medium ${darkMode ? 'text-zinc-400' : 'text-zinc-600'}`}>
                Reminder
              </label>
              <button
                type="button"
                onClick={() => setFormData({ ...formData, reminderEnabled: !formData.reminderEnabled })}
                className={`p-1 rounded ${
                  formData.reminderEnabled
                    ? (darkMode ? 'text-white' : 'text-black')
                    : (darkMode ? 'text-zinc-600' : 'text-zinc-400')
                }`}
              >
                {formData.reminderEnabled ? <Bell size={20} /> : <BellOff size={20} />}
              </button>
            </div>
            {formData.reminderEnabled && (
              <input
                type="time"
                value={formData.reminderTime}
                onChange={(e) => setFormData({ ...formData, reminderTime: e.target.value })}
                className={`w-full px-4 py-3 rounded-lg border ${
                  darkMode
                    ? 'bg-black border-zinc-800 focus:border-zinc-700'
                    : 'bg-white border-zinc-200 focus:border-zinc-400'
                } outline-none transition-colors`}
              />
            )}
          </div>

          <button
            type="submit"
            className={`w-full py-3 rounded-lg font-medium ${
              darkMode ? 'bg-white text-black hover:bg-zinc-200' : 'bg-black text-white hover:bg-zinc-800'
            } transition-colors`}
          >
            Create Habit
          </button>
        </form>
        </div>
      </div>
    </div>
  );
};

const InfoModal = ({ darkMode, onClose }) => {
  return (
    <div className="modal-backdrop fixed inset-0 z-50 flex items-center justify-center p-4" style={{
      backgroundColor: darkMode ? 'rgba(0,0,0,0.8)' : 'rgba(255,255,255,0.8)'
    }} onClick={onClose}>
      <div
        className={`modal-content w-full max-w-md rounded-2xl p-6 ${
          darkMode ? 'bg-zinc-900 border border-zinc-800' : 'bg-white border border-zinc-200'
        }`}
        onClick={(e) => e.stopPropagation()}
      >
        <div className="flex items-center justify-between mb-6">
          <h2 className="text-xl font-bold">Info</h2>
          <button
            onClick={onClose}
            className={`p-2 rounded-lg ${darkMode ? 'hover:bg-zinc-800' : 'hover:bg-zinc-100'}`}
          >
            <X size={20} />
          </button>
        </div>

        <div className={`${darkMode ? 'text-zinc-300' : 'text-zinc-700'}`}>
          <p>Text will be added later...</p>
        </div>
      </div>
    </div>
  );
};

const SettingsModal = ({ settings, darkMode, setDarkMode, onClose, onSave }) => {
  const [formData, setFormData] = useState({
    birthDate: settings.birthDate || '',
    lifeExpectancy: settings.lifeExpectancy || 80,
    retirementAge: settings.retirementAge || ''
  });

  const handleSubmit = (e) => {
    e.preventDefault();
    onSave({
      ...formData,
      retirementAge: formData.retirementAge ? parseInt(formData.retirementAge) : null
    });
  };

  return (
    <div className="modal-backdrop fixed inset-0 z-50 flex items-center justify-center p-4" style={{
      backgroundColor: darkMode ? 'rgba(0,0,0,0.8)' : 'rgba(255,255,255,0.8)'
    }} onClick={onClose}>
      <div
        className={`modal-content w-full max-w-md rounded-2xl ${
          darkMode ? 'bg-zinc-900 border border-zinc-800' : 'bg-white border border-zinc-200'
        } max-h-[85vh] flex flex-col`}
        onClick={(e) => e.stopPropagation()}
      >
        <div className={`flex items-center justify-between p-6 pb-4 border-b ${darkMode ? 'border-zinc-800' : 'border-zinc-200'}`}>
          <h2 className="text-xl font-bold">Settings</h2>
          <button
            onClick={onClose}
            className={`p-2 rounded-lg ${darkMode ? 'hover:bg-zinc-800' : 'hover:bg-zinc-100'}`}
          >
            <X size={20} />
          </button>
        </div>

        <div className="overflow-y-auto flex-1 px-6" style={{ minHeight: 0 }}>
          <form onSubmit={handleSubmit} className="space-y-6 py-6">
          {/* Display Mode */}
          <div>
            <div className="flex items-center justify-between mb-2">
              <label className={`text-sm font-medium ${darkMode ? 'text-zinc-400' : 'text-zinc-600'}`}>
                Display Mode
              </label>
              <button
                type="button"
                onClick={() => setDarkMode(!darkMode)}
                className={`p-2 rounded-lg flex items-center gap-2 ${darkMode ? 'hover:bg-zinc-800' : 'hover:bg-zinc-100'}`}
              >
                {darkMode ? (
                  <>
                    <Moon size={16} />
                    <span className="text-sm">Dark</span>
                  </>
                ) : (
                  <>
                    <Sun size={16} />
                    <span className="text-sm">Light</span>
                  </>
                )}
              </button>
            </div>
          </div>

          {/* Divider */}
          <div className={`border-t ${darkMode ? 'border-zinc-800' : 'border-zinc-200'}`} />

          {/* Life Progress Settings */}
          <div>
            <h3 className={`text-sm font-semibold mb-3 ${darkMode ? 'text-zinc-300' : 'text-zinc-700'}`}>
              Life Progress
            </h3>
            
            <div className="space-y-4">
              <div>
                <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-zinc-400' : 'text-zinc-600'}`}>
                  Birth Year
                </label>
                <input
                  type="number"
                  min="1900"
                  max={new Date().getFullYear()}
                  value={formData.birthDate}
                  onChange={(e) => setFormData({ ...formData, birthDate: e.target.value })}
                  placeholder="e.g. 1990"
                  className={`w-full px-4 py-3 rounded-lg border ${
                    darkMode
                      ? 'bg-black border-zinc-800 focus:border-zinc-700'
                      : 'bg-white border-zinc-200 focus:border-zinc-400'
                  } outline-none transition-colors`}
                />
              </div>

              <div>
                <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-zinc-400' : 'text-zinc-600'}`}>
                  Life Expectancy
                </label>
                <input
                  type="number"
                  min="1"
                  max="120"
                  value={formData.lifeExpectancy}
                  onChange={(e) => setFormData({ ...formData, lifeExpectancy: parseInt(e.target.value) || 80 })}
                  className={`w-full px-4 py-3 rounded-lg border ${
                    darkMode
                      ? 'bg-black border-zinc-800 focus:border-zinc-700'
                      : 'bg-white border-zinc-200 focus:border-zinc-400'
                  } outline-none transition-colors`}
                />
              </div>

              <div>
                <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-zinc-400' : 'text-zinc-600'}`}>
                  Retirement Age (optional)
                </label>
                <input
                  type="number"
                  min="1"
                  max="120"
                  value={formData.retirementAge}
                  onChange={(e) => setFormData({ ...formData, retirementAge: e.target.value })}
                  placeholder="e.g. 65"
                  className={`w-full px-4 py-3 rounded-lg border ${
                    darkMode
                      ? 'bg-black border-zinc-800 focus:border-zinc-700'
                      : 'bg-white border-zinc-200 focus:border-zinc-400'
                  } outline-none transition-colors`}
                />
              </div>
            </div>
          </div>

          {/* Divider */}
          <div className={`border-t ${darkMode ? 'border-zinc-800' : 'border-zinc-200'}`} />

          {/* Data Management */}
          <div>
            <h3 className={`text-sm font-semibold mb-3 ${darkMode ? 'text-zinc-300' : 'text-zinc-700'}`}>
              Data Management
            </h3>
            
            <div className="space-y-2">
              {/* Export JSON */}
              <button
                type="button"
                onClick={() => {
                  // Get parent component's export function
                  const event = new CustomEvent('exportData');
                  window.dispatchEvent(event);
                }}
                className={`w-full px-4 py-3 rounded-lg font-medium flex items-center justify-between ${
                  darkMode ? 'bg-zinc-800 text-white hover:bg-zinc-700' : 'bg-zinc-100 text-black hover:bg-zinc-200'
                } transition-colors`}
              >
                <span className="flex items-center gap-2">
                  <Download size={18} />
                  Export Data (JSON)
                </span>
              </button>

              {/* Import JSON */}
              <label className={`w-full px-4 py-3 rounded-lg font-medium flex items-center justify-between cursor-pointer ${
                darkMode ? 'bg-zinc-800 text-white hover:bg-zinc-700' : 'bg-zinc-100 text-black hover:bg-zinc-200'
              } transition-colors`}>
                <span className="flex items-center gap-2">
                  <Upload size={18} />
                  Import Data (JSON)
                </span>
                <input
                  type="file"
                  accept=".json"
                  onChange={(e) => {
                    const event = new CustomEvent('importData', { detail: e });
                    window.dispatchEvent(event);
                  }}
                  className="hidden"
                />
              </label>

              {/* QR Code Export */}
              <button
                type="button"
                onClick={() => {
                  const event = new CustomEvent('showQRCode');
                  window.dispatchEvent(event);
                }}
                className={`w-full px-4 py-3 rounded-lg font-medium flex items-center justify-between ${
                  darkMode ? 'bg-zinc-800 text-white hover:bg-zinc-700' : 'bg-zinc-100 text-black hover:bg-zinc-200'
                } transition-colors`}
              >
                <span className="flex items-center gap-2">
                  <QrCode size={18} />
                  Show QR Code
                </span>
              </button>

              {/* QR Code Import */}
              <button
                type="button"
                onClick={() => {
                  const event = new CustomEvent('showQRScanner');
                  window.dispatchEvent(event);
                }}
                className={`w-full px-4 py-3 rounded-lg font-medium flex items-center justify-between ${
                  darkMode ? 'bg-zinc-800 text-white hover:bg-zinc-700' : 'bg-zinc-100 text-black hover:bg-zinc-200'
                } transition-colors`}
              >
                <span className="flex items-center gap-2">
                  <Camera size={18} />
                  Scan QR Code
                </span>
              </button>
            </div>

            <p className={`text-xs mt-3 ${darkMode ? 'text-zinc-500' : 'text-zinc-500'}`}>
              Export your data as a backup or transfer it to another device.
            </p>
          </div>

          {/* Divider */}
          <div className={`border-t ${darkMode ? 'border-zinc-800' : 'border-zinc-200'}`} />

          <button
            type="submit"
            className={`w-full py-3 rounded-lg font-medium ${
              darkMode ? 'bg-white text-black hover:bg-zinc-200' : 'bg-black text-white hover:bg-zinc-800'
            } transition-colors`}
          >
            Save
          </button>
        </form>
        </div>
      </div>
    </div>
  );
};

const EditHabitModal = ({ habit, darkMode, onClose, onUpdate }) => {
  const [formData, setFormData] = useState({
    name: habit.name,
    description: habit.description || '',
    frequency: habit.frequency,
    reminderEnabled: !!habit.reminderTime,
    reminderTime: habit.reminderTime || '09:00',
    createdAt: new Date(habit.createdAt).toISOString().split('T')[0]
  });

  const handleSubmit = (e) => {
    e.preventDefault();
    if (formData.name.trim()) {
      onUpdate(habit.id, {
        name: formData.name.trim(),
        description: formData.description.trim(),
        frequency: formData.frequency,
        reminderTime: formData.reminderEnabled ? formData.reminderTime : null,
        createdAt: new Date(formData.createdAt).toISOString()
      });
    }
  };

  return (
    <div className="modal-backdrop fixed inset-0 z-50 flex items-center justify-center p-4" style={{
      backgroundColor: darkMode ? 'rgba(0,0,0,0.8)' : 'rgba(255,255,255,0.8)'
    }} onClick={onClose}>
      <div
        className={`modal-content w-full max-w-md rounded-2xl ${
          darkMode ? 'bg-zinc-900 border border-zinc-800' : 'bg-white border border-zinc-200'
        } max-h-[85vh] flex flex-col`}
        onClick={(e) => e.stopPropagation()}
      >
        <div className={`flex items-center justify-between p-6 pb-4 border-b ${darkMode ? 'border-zinc-800' : 'border-zinc-200'}`}>
          <h2 className="text-xl font-bold">Edit Habit</h2>
          <button
            onClick={onClose}
            className={`p-2 rounded-lg ${darkMode ? 'hover:bg-zinc-800' : 'hover:bg-zinc-100'}`}
          >
            <X size={20} />
          </button>
        </div>

        <div className="overflow-y-auto flex-1 px-6" style={{ minHeight: 0 }}>
          <form onSubmit={handleSubmit} className="space-y-4 py-6">
          <div>
            <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-zinc-400' : 'text-zinc-600'}`}>
              Name *
            </label>
            <input
              type="text"
              value={formData.name}
              onChange={(e) => setFormData({ ...formData, name: e.target.value })}
              placeholder="e.g. Meditation, Exercise, Reading..."
              className={`w-full px-4 py-3 rounded-lg border ${
                darkMode
                  ? 'bg-black border-zinc-800 focus:border-zinc-700'
                  : 'bg-white border-zinc-200 focus:border-zinc-400'
              } outline-none transition-colors`}
              autoFocus
            />
          </div>

          <div>
            <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-zinc-400' : 'text-zinc-600'}`}>
              Description (optional)
            </label>
            <textarea
              value={formData.description}
              onChange={(e) => setFormData({ ...formData, description: e.target.value })}
              placeholder="Brief description..."
              rows={2}
              className={`w-full px-4 py-3 rounded-lg border resize-none ${
                darkMode
                  ? 'bg-black border-zinc-800 focus:border-zinc-700'
                  : 'bg-white border-zinc-200 focus:border-zinc-400'
              } outline-none transition-colors`}
            />
          </div>

          <div>
            <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-zinc-400' : 'text-zinc-600'}`}>
              Frequency
            </label>
            <div className="grid grid-cols-2 gap-2">
              {[
                { value: 'daily', label: 'Daily' },
                { value: 'every2days', label: 'Every 2 days' },
                { value: 'weekly', label: 'Weekly' },
                { value: 'monthly', label: 'Monthly' }
              ].map(option => (
                <button
                  key={option.value}
                  type="button"
                  onClick={() => setFormData({ ...formData, frequency: option.value })}
                  className={`px-4 py-3 rounded-lg text-sm font-medium transition-all ${
                    formData.frequency === option.value
                      ? (darkMode ? 'bg-white text-black' : 'bg-black text-white')
                      : (darkMode ? 'bg-zinc-800 hover:bg-zinc-750' : 'bg-zinc-100 hover:bg-zinc-200')
                  }`}
                >
                  {option.label}
                </button>
              ))}
            </div>
          </div>

          <div>
            <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-zinc-400' : 'text-zinc-600'}`}>
              Start Date
            </label>
            <input
              type="date"
              value={formData.createdAt}
              onChange={(e) => setFormData({ ...formData, createdAt: e.target.value })}
              className={`w-full px-4 py-3 rounded-lg border ${
                darkMode
                  ? 'bg-black border-zinc-800 focus:border-zinc-700'
                  : 'bg-white border-zinc-200 focus:border-zinc-400'
              } outline-none transition-colors`}
            />
          </div>

          <div>
            <div className="flex items-center justify-between mb-2">
              <label className={`text-sm font-medium ${darkMode ? 'text-zinc-400' : 'text-zinc-600'}`}>
                Reminder
              </label>
              <button
                type="button"
                onClick={() => setFormData({ ...formData, reminderEnabled: !formData.reminderEnabled })}
                className={`p-1 rounded ${
                  formData.reminderEnabled
                    ? (darkMode ? 'text-white' : 'text-black')
                    : (darkMode ? 'text-zinc-600' : 'text-zinc-400')
                }`}
              >
                {formData.reminderEnabled ? <Bell size={20} /> : <BellOff size={20} />}
              </button>
            </div>
            {formData.reminderEnabled && (
              <input
                type="time"
                value={formData.reminderTime}
                onChange={(e) => setFormData({ ...formData, reminderTime: e.target.value })}
                className={`w-full px-4 py-3 rounded-lg border ${
                  darkMode
                    ? 'bg-black border-zinc-800 focus:border-zinc-700'
                    : 'bg-white border-zinc-200 focus:border-zinc-400'
                } outline-none transition-colors`}
              />
            )}
          </div>

          <button
            type="submit"
            className={`w-full py-3 rounded-lg font-medium ${
              darkMode ? 'bg-white text-black hover:bg-zinc-200' : 'bg-black text-white hover:bg-zinc-800'
            } transition-colors`}
          >
            Save Changes
          </button>
        </form>
        </div>
      </div>
    </div>
  );
};

const HabitDetailModal = ({ habit, darkMode, onClose, onDelete, onEdit, getStreak }) => {
  const streak = getStreak(habit);
  const totalCompletions = habit.completions.length;
  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);

  return (
    <div className="modal-backdrop fixed inset-0 z-50 flex items-center justify-center p-4" style={{
      backgroundColor: darkMode ? 'rgba(0,0,0,0.8)' : 'rgba(255,255,255,0.8)'
    }} onClick={onClose}>
      <div
        className={`modal-content w-full max-w-md rounded-2xl p-6 ${
          darkMode ? 'bg-zinc-900 border border-zinc-800' : 'bg-white border border-zinc-200'
        }`}
        onClick={(e) => e.stopPropagation()}
      >
        {!showDeleteConfirm ? (
          <>
            <div className="flex items-start justify-between mb-6">
              <div className="flex-1">
                <h2 className="text-xl font-bold mb-1">{habit.name}</h2>
                {habit.description && (
                  <p className={`text-sm ${darkMode ? 'text-zinc-500' : 'text-zinc-500'}`}>
                    {habit.description}
                  </p>
                )}
              </div>
              <button
                onClick={onClose}
                className={`p-2 rounded-lg ${darkMode ? 'hover:bg-zinc-800' : 'hover:bg-zinc-100'}`}
              >
                <X size={20} />
              </button>
            </div>

            <div className={`grid grid-cols-2 gap-4 p-4 rounded-xl mb-6 ${
              darkMode ? 'bg-black' : 'bg-zinc-50'
            }`}>
              <div className="text-center">
                <div className="text-3xl font-bold">{streak}</div>
                <div className={`text-sm mt-1 ${darkMode ? 'text-zinc-500' : 'text-zinc-500'}`}>
                  Current Streak
                </div>
              </div>
              <div className="text-center">
                <div className="text-3xl font-bold">{totalCompletions}</div>
                <div className={`text-sm mt-1 ${darkMode ? 'text-zinc-500' : 'text-zinc-500'}`}>
                  Total Completed
                </div>
              </div>
            </div>

            <div className="space-y-3">
              <div className={`p-4 rounded-xl ${darkMode ? 'bg-zinc-800' : 'bg-zinc-100'}`}>
                <div className={`text-xs mb-1 ${darkMode ? 'text-zinc-500' : 'text-zinc-500'}`}>Frequency</div>
                <div className="font-medium">
                  {habit.frequency === 'daily' ? 'Daily' : habit.frequency === 'every2days' ? 'Every 2 days' : habit.frequency === 'weekly' ? 'Weekly' : 'Monthly'}
                </div>
              </div>

              {habit.reminderTime && (
                <div className={`p-4 rounded-xl ${darkMode ? 'bg-zinc-800' : 'bg-zinc-100'}`}>
                  <div className={`text-xs mb-1 ${darkMode ? 'text-zinc-500' : 'text-zinc-500'}`}>Reminder</div>
                  <div className="font-medium flex items-center gap-2">
                    <Bell size={16} />
                    {habit.reminderTime}
                  </div>
                </div>
              )}

              <div className={`p-4 rounded-xl ${darkMode ? 'bg-zinc-800' : 'bg-zinc-100'}`}>
                <div className={`text-xs mb-1 ${darkMode ? 'text-zinc-500' : 'text-zinc-500'}`}>Start Date</div>
                <div className="font-medium">
                  {new Date(habit.createdAt).toLocaleDateString('en-GB', { day: 'numeric', month: 'long', year: 'numeric' })}
                </div>
              </div>
            </div>

            <div className="flex gap-3 mt-6">
              <button
                onClick={() => onEdit(habit)}
                className={`flex-1 py-3 rounded-lg font-medium ${
                  darkMode ? 'bg-zinc-800 text-white hover:bg-zinc-700' : 'bg-zinc-100 text-black hover:bg-zinc-200'
                } transition-colors`}
              >
                Edit
              </button>
              <button
                onClick={() => setShowDeleteConfirm(true)}
                className={`flex-1 py-3 rounded-lg font-medium ${
                  darkMode ? 'bg-red-950 text-red-400 hover:bg-red-900' : 'bg-red-50 text-red-600 hover:bg-red-100'
                } transition-colors`}
              >
                Delete
              </button>
            </div>
          </>
        ) : (
          <>
            <div className="flex items-start justify-between mb-6">
              <h2 className="text-xl font-bold">Delete Habit?</h2>
              <button
                onClick={() => setShowDeleteConfirm(false)}
                className={`p-2 rounded-lg ${darkMode ? 'hover:bg-zinc-800' : 'hover:bg-zinc-100'}`}
              >
                <X size={20} />
              </button>
            </div>
            
            <p className={`mb-6 ${darkMode ? 'text-zinc-400' : 'text-zinc-600'}`}>
              Do you really want to delete "{habit.name}"? This action cannot be undone.
            </p>
            
            <div className="flex gap-3">
              <button
                onClick={() => setShowDeleteConfirm(false)}
                className={`flex-1 py-3 rounded-lg font-medium ${
                  darkMode ? 'bg-zinc-800 text-white hover:bg-zinc-700' : 'bg-zinc-100 text-black hover:bg-zinc-200'
                } transition-colors`}
              >
                Cancel
              </button>
              <button
                onClick={() => {
                  onDelete(habit.id);
                  setShowDeleteConfirm(false);
                }}
                className={`flex-1 py-3 rounded-lg font-medium ${
                  darkMode ? 'bg-red-950 text-red-400 hover:bg-red-900' : 'bg-red-50 text-red-600 hover:bg-red-100'
                } transition-colors`}
              >
                Yes, Delete
              </button>
            </div>
          </>
        )}
      </div>
    </div>
  );
};

const QRCodeModal = ({ darkMode, qrData, onClose }) => {
  const [qrCodeSVG, setQrCodeSVG] = useState('');

  useEffect(() => {
    // Generate QR code using a simple library-free approach
    // For production, you'd use a proper QR library, but this creates a data URL
    const generateQR = async () => {
      try {
        // Use QRCode library via CDN (we'll add it to the HTML)
        if (window.QRCode) {
          const qr = new window.QRCode(document.createElement('div'), {
            text: qrData,
            width: 256,
            height: 256,
            colorDark: darkMode ? '#ffffff' : '#000000',
            colorLight: darkMode ? '#000000' : '#ffffff',
            correctLevel: window.QRCode.CorrectLevel.L
          });
          // Get the generated canvas
          const canvas = qr._el.querySelector('canvas');
          if (canvas) {
            setQrCodeSVG(canvas.toDataURL());
          }
        } else {
          // Fallback: show text data
          setQrCodeSVG('qr-library-not-loaded');
        }
      } catch (error) {
        console.error('QR generation error:', error);
        setQrCodeSVG('error');
      }
    };

    // Load QR Code library dynamically
    if (!window.QRCode) {
      const script = document.createElement('script');
      script.src = 'https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js';
      script.onload = generateQR;
      document.head.appendChild(script);
    } else {
      generateQR();
    }
  }, [qrData, darkMode]);

  return (
    <div className="modal-backdrop fixed inset-0 z-50 flex items-center justify-center p-4" style={{
      backgroundColor: darkMode ? 'rgba(0,0,0,0.8)' : 'rgba(255,255,255,0.8)'
    }} onClick={onClose}>
      <div
        className={`modal-content w-full max-w-md rounded-2xl p-6 ${
          darkMode ? 'bg-zinc-900 border border-zinc-800' : 'bg-white border border-zinc-200'
        }`}
        onClick={(e) => e.stopPropagation()}
      >
        <div className="flex items-center justify-between mb-6">
          <h2 className="text-xl font-bold">QR Code Export</h2>
          <button
            onClick={onClose}
            className={`p-2 rounded-lg ${darkMode ? 'hover:bg-zinc-800' : 'hover:bg-zinc-100'}`}
          >
            <X size={20} />
          </button>
        </div>

        <div className="flex flex-col items-center">
          {qrCodeSVG && qrCodeSVG !== 'error' && qrCodeSVG !== 'qr-library-not-loaded' ? (
            <div className={`p-4 rounded-xl ${darkMode ? 'bg-white' : 'bg-black'}`}>
              <img src={qrCodeSVG} alt="QR Code" className="w-64 h-64" />
            </div>
          ) : (
            <div className={`w-64 h-64 flex items-center justify-center rounded-xl ${
              darkMode ? 'bg-zinc-800' : 'bg-zinc-100'
            }`}>
              <QrCode size={64} className={darkMode ? 'text-zinc-600' : 'text-zinc-400'} />
            </div>
          )}

          <p className={`text-sm text-center mt-4 ${darkMode ? 'text-zinc-400' : 'text-zinc-600'}`}>
            Scan this QR code with another device to transfer your data.
          </p>
        </div>
      </div>
    </div>
  );
};

const QRScannerModal = ({ darkMode, onClose, onScan }) => {
  const [manualInput, setManualInput] = useState('');
  const [useCamera, setUseCamera] = useState(false);

  const handleManualImport = () => {
    if (manualInput.trim()) {
      onScan(manualInput);
      setManualInput('');
    }
  };

  return (
    <div className="modal-backdrop fixed inset-0 z-50 flex items-center justify-center p-4" style={{
      backgroundColor: darkMode ? 'rgba(0,0,0,0.8)' : 'rgba(255,255,255,0.8)'
    }} onClick={onClose}>
      <div
        className={`modal-content w-full max-w-md rounded-2xl p-6 ${
          darkMode ? 'bg-zinc-900 border border-zinc-800' : 'bg-white border border-zinc-200'
        }`}
        onClick={(e) => e.stopPropagation()}
      >
        <div className="flex items-center justify-between mb-6">
          <h2 className="text-xl font-bold">QR Code Import</h2>
          <button
            onClick={onClose}
            className={`p-2 rounded-lg ${darkMode ? 'hover:bg-zinc-800' : 'hover:bg-zinc-100'}`}
          >
            <X size={20} />
          </button>
        </div>

        <div className="space-y-4">
          <div className={`p-4 rounded-xl text-center ${darkMode ? 'bg-zinc-800' : 'bg-zinc-100'}`}>
            <Camera size={48} className={`mx-auto mb-3 ${darkMode ? 'text-zinc-600' : 'text-zinc-400'}`} />
            <p className={`text-sm ${darkMode ? 'text-zinc-400' : 'text-zinc-600'}`}>
              Note: Camera scanning is not supported in this version.
            </p>
            <p className={`text-sm mt-2 ${darkMode ? 'text-zinc-400' : 'text-zinc-600'}`}>
              Use manual import or the JSON file option instead.
            </p>
          </div>

          <div>
            <label className={`block text-sm font-medium mb-2 ${darkMode ? 'text-zinc-400' : 'text-zinc-600'}`}>
              Or paste QR code data manually:
            </label>
            <textarea
              value={manualInput}
              onChange={(e) => setManualInput(e.target.value)}
              placeholder="Paste QR code data here..."
              rows={4}
              className={`w-full px-4 py-3 rounded-lg border resize-none font-mono text-xs ${
                darkMode
                  ? 'bg-black border-zinc-800 focus:border-zinc-700'
                  : 'bg-white border-zinc-200 focus:border-zinc-400'
              } outline-none transition-colors`}
            />
          </div>

          <button
            onClick={handleManualImport}
            disabled={!manualInput.trim()}
            className={`w-full py-3 rounded-lg font-medium ${
              manualInput.trim()
                ? (darkMode ? 'bg-white text-black hover:bg-zinc-200' : 'bg-black text-white hover:bg-zinc-800')
                : (darkMode ? 'bg-zinc-800 text-zinc-600' : 'bg-zinc-200 text-zinc-400')
            } transition-colors`}
          >
            Import Data
          </button>
        </div>
      </div>
    </div>
  );
};


createRoot(document.getElementById('root')).render(<HabitTracker/>);
</script>
</body>
</html>